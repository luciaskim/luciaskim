---
title: How I Built My Blog Using Next.js, Vercel, and MDX
abstract: A guide to building a blog using Next.js, Vercel, and MDX
tags: ["javascript", "next.js", "mdx"]
category: "development"
public: true
publishedAt: "2023-04-30T15:00:00Z"
layout: Article
---

## Why Next.js, Vercel, and MDX
I chose Next.js to create my website because of its speed, and Vercel to host my blog because it is from the same developers as Next.js. I chose to write my content in MDX, rather than a separate content management system (SNS).

When I first created a blog, I used Sanity.io as a headless CMS. However, the text editor was slow when writing pages over 30,000 characters and customising images was a hassle. Having a simple MDX file allows me to focus on the content.


## Introducing MDX
### What is MDX?
Markdown is a markdown language which allows you to format text. MDX combines Markdown and JSX, allowing you to write content and code at the same time.

### MDX Packages
There are three main methods to use MDX with Next.js
1.  `@next/mdx` 
2. `next-mdx-remote`
3. `mdx-bundler`
I chose `mdx-bundler` because it can use frontmatter and I did not want to import my components for every MDX file. `mdx-bundler` uses `esbuild.`


## How the blog works

Here is my directory structure:

```
luciaskim.com
+---components
+---lib
|   |   posts.js
+---pages
|   index.js
|   +---posts
|   |   [id].js
+---posts
+---public
+---styles
+---node_modules
```

 The `lib` directory contains functions that can be used throughout the blog. It is also commonly named as `utils`.

`post.js` contains the helper function to render the blog posts. 

There are currently 3 import functions:
1. `getAllPostIds()` creates an array of id. For each file in the `posts' directory, a slug is generated from the filename and is stored as id.
2. `getSortedPostsData()` creates an array containing the id and the frontmatter, sorted by publish date.
3. `getPostData(id)` returns the id, frontmatter, and content of the mdx file specified by the id

The `pages` directory render the log. The `public` directory contains images. The `styles` directory contains CSS.

### How to write an article

To write a new article, create a new mdx file in the `posts` directory. The frontmatter is:

```
---
title:
abstract: 
tags: [""]
category: "development"
public: true
publishedAt: "2023-04-30T15:00:00Z"
layout: Article
---

Write content here!
```



## Deploying to Vercel
1. Push the blog folder to a remote repository
2. Connect Vercel to GitHub
3. Deploy
4. Link to my custom domain luciaskim.com



## Difficulties and moving forward

### T
The most difficult aspect of creating my blog was combining different guides. Because the official tutorial does not implement MDX, I had to look at several other tutorials and combine the best advices from all of them. Choosing the most relevant structure took the longest time.

In the end, I combined three tutorials:
1. Official Next.js tutorial
2. 
3. 

I tried to follow the official tutorial for the function and variable names. I had to fully understand the code structure to identify duplicate code and name changes.

Here are the list of 

https://blog.logrocket.com/create-next-js-mdx-blog/
1. Uses meta (for browser), which is separate from gray-matter (for user)
2. Create component which sets a variable as a constant, export the constant to be used in other files
3. `Disclosure componenet`
4. Global and static HTML
5. Custom components using `MDXComponents`
6. API routes

https://www.iamyadav.com/blogs/use-mdx-bundler-with-next-js

https://www.codeconcisely.com/posts/nextjs-mdx/


### What to do next

Here are the things I want to do for my blog:
1. Nest the posts by category so that the posts have the url `luciaskim.com/category/slug`
2. Mindmap of categories in the home page


## Guides

